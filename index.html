<style type="text/css">
body {
  margin: 0;
  background: black;
}
img {
  width: 100%;
  height: 100%;
}
.sixty {
  height: 55vh;
  width: 50%;
  float: left;
  display: inline;
}
.fourty {
  height: 45vh;
  width: 33.333%;
  float: left;
  display: inline;
}
#sounding, #precip, #mlsp_wind {
  filter: invert(1);
}

#air_qual {
  filter: hue-rotate(90deg) grayscale(90%) invert(1) brightness(0.8);
}
</style>

<div class="sixty">
  <a target="_blank" id="sounding-link" href="#">
    <img id="sounding" />
  </a>
</div>
<div class="sixty">
  <img id="wttr" src="https://wttr.in/Philadelphia_m.png" />
</div>
<div class="fourty">
  <img id="precip" />
</div>
<div class="fourty">
  <img id="mlsp_wind" />
</div>
<div class="fourty">
  <a target="_blank" href="https://files.airnowtech.org/airnow/today/cur_aqi_philadelphia_pa.jpg">
    <img id="air_qual" src="https://files.airnowtech.org/airnow/today/cur_aqi_philadelphia_pa.jpg" />
  </a>
</div>

<script type="text/javascript">
  var date = new Date()
  var date_utc_string = date.getUTCFullYear().toString() + (date.getUTCMonth() + 1).toString().padStart(2, '0') + date.getUTCDate().toString().padStart(2, '0')
  // 00z 006z 12z 18z
  if (date.getUTCHours() > 22 || date.getUTCHours() < 4) {
    date_utc_string += "18"
  } else if (date.getUTCHours() > 16) {
    date_utc_string += "12"
  } else if (date.getUTCHours() > 10) {
    date_utc_string += "06"
  } else {
    date_utc_string += "00"
  }

  // need to actually request the page that will generate the sounding before the image exists.

  var sounding = `https://tropicaltidbits.com/analysis/models/sounding/images/gfs_${date_utc_string}_fh6_sounding_39.93N_75.17W.png`
  var sounding_link = `https://tropicaltidbits.com/analysis/models/sounding/?model=gfs&runtime=${date_utc_string}&fh=6&lat=39.93&lon=-75.17&stationID=&tc=&mode=regular`
  document.getElementById("sounding").src = sounding;
  document.getElementById("sounding-link").href = sounding_link;


  var precip = `https://tropicaltidbits.com/analysis/models/gfs/${date_utc_string}/gfs_mslp_pcpn_frzn_neus_1.png`
  var mlsp_wind = `https://tropicaltidbits.com/analysis/models/gfs/${date_utc_string}/gfs_mslp_wind_neus_2.png`

  document.getElementById("precip").src = precip;
  document.getElementById("mlsp_wind").src = mlsp_wind;
</script>